<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Training Plan</title>
    <style>
        .plan-controls {
            text-align: center;
            margin-bottom: 2em;
            padding: 15px;
            background: #ecf0f1;
            border-radius: 5px;
        }
        .plan-controls label {
            font-weight: bold;
            margin-right: 10px;
        }
        .plan-controls input[type="number"] {
            width: 80px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        .plan-controls button {
            padding: 6px 12px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        .plan-controls button:hover {
            background-color: #c0392b;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background: #fff;
            color: #333;
        }
        .container {
            margin: 0;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #333;
            margin-top: 1em;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 1em;
        }
        h3 {
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
            margin-top: 2em;
        }
        p {
            margin-bottom: 1em;
        }
        ul, ol {
            margin-bottom: 1em;
            padding-left: 20px;
        }
        li {
            margin-bottom: 0.5em;
        }
        hr {
            border: 0;
            height: 1px;
            background: #ccc;
            margin: 2em 0;
        }
        .table-container {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1em;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            min-width: 150px;
        }
        th {
            background-color: #e74c3c;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tr:hover {
            background-color: #ddd;
        }
        strong {
            color: #c0392b;
        }
        .warmup-group, .cooldown-section {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .warmup-group h3, .cooldown-section h3 {
            border-bottom: none;
            color: #2c3e50;
        }

        @media screen and (max-width: 768px) {
            .container {
                padding: 10px;
            }
            th, td {
                padding: 10px;
            }
        }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.5); /* Black w/ opacity */
        }

        .modal-content {
            background-color: #fefefe;
            margin: 10% auto; /* 10% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 700px;
            border-radius: 8px;
            position: relative;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* Make table cells clickable */
        .table-container td[data-details-file] {
            cursor: pointer;
        }
        .table-container td[data-details-file]:hover {
            background-color: #ffdddd; /* A light red hover effect */
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

    <div class="container">
        <h1>Dynamic Training Plan v2</h1>

        <div class="plan-controls">
            <label for="total-weeks">Total Weeks in Plan:</label>
            <input type="number" id="total-weeks" value="9" min="7">
            <button id="generate-plan-btn">Generate Plan</button>
        </div>

        <h2>The New Youth Training Groups: A Physiologically-Based Structure</h2>
        <p>This new structure moves away from broad categories like "Mid-Distance" and creates specific groups based on the primary energy systems and biomechanical demands of their events. This allows for more targeted training and helps athletes find the events where their natural talents can truly shine.</p>

        <h3>1. Short Sprints</h3>
        <ul>
            <li><strong>Events Covered:</strong> 60m, 100m, 200m, 4x100m Relay</li>
            <li><strong>Athlete Profile:</strong> Naturally fast and powerful, with high stride frequency.</li>
            <li><strong>Core Training Philosophy:</strong> Speed & Power Dominant. The goal is to maximize acceleration and achieve the highest possible top speed.</li>
        </ul>

        <h3>2. Jumps & Sprints</h3>
        <ul>
            <li><strong>Events Covered:</strong> Long Jump, Triple Jump, High Jump, (often also competes in Short Sprints).</li>
            <li><strong>Athlete Profile:</strong> Excellent power, coordination, and natural speed. Often have a lean, powerful build.</li>
            <li><strong>Core Training Philosophy:</strong> Explosive Power Dominant. Training is focused on converting horizontal speed into vertical or horizontal distance.</li>
        </ul>

        <h3>3. Long Sprints</h3>
        <ul>
            <li><strong>Events Covered:</strong> 400m, 4x400m Relay (often also competes in the 200m).</li>
            <li><strong>Athlete Profile:</strong> A strong blend of natural speed and aerobic capacity. They can hold a fast pace.</li>
            <li><strong>Core Training Philosophy:</strong> Speed Endurance Dominant. Specializes in lactate tolerance, maintaining near-maximal speed under extreme metabolic fatigue.</li>
        </ul>

        <h3>4. Middle Distance</h3>
        <ul>
            <li><strong>Events Covered:</strong> 800m, 1500m, Mile</li>
            <li><strong>Athlete Profile:</strong> High aerobic capacity and strength endurance, with above-average natural speed.</li>
            <li><strong>Core Training Philosophy:</strong> Aerobic/Anaerobic Hybrid. A balanced attack on both the aerobic and anaerobic systems to build a powerful aerobic engine and a strong finishing kick.</li>
        </ul>

        <h3>5. Long Distance</h3>
        <ul>
            <li><strong>Events Covered:</strong> 3000m (3k), 5000m (5k), Cross Country</li>
            <li><strong>Athlete Profile:</strong> Excellent aerobic capacity. Can sustain effort for a very long time.</li>
            <li><strong>Core Training Philosophy:</strong> Aerobic Dominant. The foundation is volume, with a focus on building the aerobic engine through consistent easy and long runs.</li>
        </ul>

        <h3>6. Throws</h3>
        <ul>
            <li><strong>Events Covered:</strong> Shot Put, Discus, Javelin</li>
            <li><strong>Athlete Profile:</strong> Excellent strength, power, and coordination. Higher body mass is often an advantage.</li>
            <li><strong>Core Training Philosophy:</strong> Maximal Strength & Rotational Power Dominant. Training is centered on building immense total-body strength and channeling it into a single, explosive, coordinated movement.</li>
        </ul>

        <hr>

        <div class="warmup-section">
            <h2 data-heading="**General Warm-Up Routine (Approx. 20-25 Minutes)**">General Warm-Up Routine (Approx. 20-25 Minutes)</h2>
            <p>The goal is to raise core body temperature, increase blood flow to muscles, activate key movement patterns, and prepare the nervous system for the specific work of the day. This warm-up is designed to be progressive, moving from general to more specific movements.</p>

            <div class="warmup-group">
                <h3><strong>Group 1: Short Sprints, Jumps & Sprints, Long Sprints</strong></h3>
                <p><em>This group needs to prepare for high-velocity, explosive movements. The focus is on dynamic mobility and neuromuscular activation.</em></p>
                <ol>
                    <li><strong>Pulse Raiser (3-5 mins):</strong>
                        <ul>
                            <li>2-3 laps of an open field at an easy jog.</li>
                            <li>Incorporate variety: Side Shuffles, Carioca, Skipping, light jogging backwards.</li>
                        </ul>
                    </li>
                    <li><strong>Dynamic Mobility (5-7 mins):</strong> (Perform each for ~15m)
                        <ul>
                            <li><strong>Leg Swings:</strong> 10x each leg (forward/backward and side-to-side).</li>
                            <li><strong>Walking Knee Hugs:</strong> Pull knee to chest, hold for a step.</li>
                            <li><strong>Walking Quad Stretch:</strong> Grab ankle and pull heel to glute.</li>
                            <li><strong>Walking Lunges with a Twist:</strong> Step into a lunge, twist torso over the front leg.</li>
                            <li><strong>Spiderman Lunge with T-Spine Rotation:</strong> Lunge, place hand on ground, rotate chest to the sky.</li>
                        </ul>
                    </li>
                    <li><strong>Activation & Drills (7-10 mins):</strong> (Perform each for ~20 yards)
                        <ul>
                            <li><strong>A-March/A-Skip:</strong> Focus on posture and striking under the hips.</li>
                            <li><strong>B-Skip:</strong> Emphasizes hamstring extension and pulling action.</li>
                            <li><strong>Butt Kicks & High Knees:</strong> For turnover and frequency.</li>
                            <li><strong>Straight Leg Bounds:</strong> For hamstring readiness.</li>
                            <li><strong>Pogo Hops:</strong> To develop ankle stiffness and reactivity.</li>
                        </ul>
                    </li>
                    <li><strong>Build-Ups (3-4 mins):</strong>
                        <ul>
                            <li>4-5 x 60-80m strides on the field.</li>
                            <li>Gradually increase speed with each one: 60% -> 70% -> 80% -> 90% -> 95% effort. Focus on relaxed, fast form.</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <hr>

            <div class="warmup-group">
                <h3><strong>Group 2: Middle Distance, Long Distance</strong></h3>
                <p><em>This group needs to prepare the aerobic system while also ensuring good mechanics and mobility for efficient running.</em></p>
                <ol>
                    <li><strong>Pulse Raiser (5-10 mins):</strong>
                        <ul>
                            <li>Longer continuous jog than the sprint group (800m-1600m) at a very easy, conversational pace.</li>
                        </ul>
                    </li>
                    <li><strong>Dynamic Mobility (5-7 mins):</strong>
                        <ul>
                            <li>Same routine as the Sprints & Jumps group (Leg Swings, Lunges, etc.). Hip mobility is critical for running economy.</li>
                        </ul>
                    </li>
                    <li><strong>Activation & Drills (5-7 mins):</strong> (Perform each for ~30-40 yards)
                        <ul>
                            <li>A-Skips, High Knees, Butt Kicks. The focus here is less on explosive power and more on rhythm and efficient movement.</li>
                            <li>Carioca and Side Shuffles to ensure lateral hip strength.</li>
                        </ul>
                    </li>
                    <li><strong>Build-Ups (3-4 mins):</strong>
                        <ul>
                            <li>5-7 x 100m strides on a flat stretch of road or field.</li>
                            <li>Focus on feeling smooth, light, and efficient, building to about 5k race pace effort.</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <hr>

            <div class="warmup-group">
                <h3><strong>Group 3: Throws</strong></h3>
                <p><em>This group needs to prepare for powerful, full-body rotational movements. The focus is on joint mobility (shoulders, hips, spine) and explosive activation.</em></p>
                <ol>
                    <li><strong>Pulse Raiser (3-5 mins):</strong>
                        <ul>
                            <li>1-2 laps easy jog, followed by skipping and light bounding.</li>
                        </ul>
                    </li>
                    <li><strong>Dynamic Mobility (7-10 mins):</strong> <em>This is the most critical part for them.</em>
                        <ul>
                            <li><strong>Arm Circles:</strong> Forward and backward, small to large.</li>
                            <li><strong>Trunk Twists:</strong> Feet planted, rotating the torso.</li>
                            <li><strong>Deep Squat Hold:</strong> Sit in a full-depth bodyweight squat to open the hips.</li>
                            <li><strong>Spiderman Lunge with T-Spine Rotation:</strong> Lunge, place hand on ground, rotate chest to the sky.</li>
                            <li><strong>Leg Swings & Hurdle Mobility:</strong> Same as other groups.</li>
                        </ul>
                    </li>
                    <li><strong>Activation & Drills (5-7 mins):</strong>
                        <ul>
                            <li><strong>Standing Long Jumps:</strong> 3-5 jumps for explosive power.</li>
                            <li><strong>Medicine Ball Throws (Overhead & Rotational):</strong> 3-5 reps each side to activate the core and upper body.</li>
                            <li><strong>"Mock Throws":</strong> Use a soccer/volleyball or just their body to go through the throwing motion at 50% speed to warm up the specific pattern.</li>
                        </ul>
                    </li>
                    <li><strong>Build-Ups (2-3 mins):</strong>
                        <ul>
                            <li>3-4 x 20-30m sprints to get the full body firing.</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <hr>

        <div class="program-overview">
            <h2>Strength & Power Development</h2>
            <p>This section outlines a periodized approach to strength and power training, designed to build a strong foundation and then convert that strength into sport-specific power.</p>

            <h3>Phase 1: Foundational Strength (Weeks 1-3)</h3>
            <p><em>Focus on building a solid base of strength with compound movements. This phase is about increasing the body's capacity to produce force.</em></p>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th align="left">Group</th>
                            <th align="left">Day 1 Focus</th>
                            <th align="left">Day 2 Focus</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td align="left"><strong>Short Sprints, Jumps & Sprints, Long Sprints</strong></td>
                            <td align="left" data-details-file="strength_p1_group1_day1.md"><strong>Lower Body Strength:</strong><br>• Goblet Squats: 3x8-10<br>• Romanian Deadlifts (RDLs): 3x8-10<br>• Walking Lunges: 3x10 each leg</td>
                            <td align="left" data-details-file="strength_p1_group1_day2.md"><strong>Upper Body & Core:</strong><br>• Push-ups: 3x to failure<br>• Inverted Rows: 3x8-10<br>• Plank Variations: 3x30-45s</td>
                        </tr>
                        <tr>
                            <td align="left"><strong>Middle Distance, Long Distance</strong></td>
                            <td align="left" data-details-file="strength_p1_group2_day1.md"><strong>Full Body Strength:</strong><br>• Bodyweight Squats: 3x15-20<br>• Glute Bridges: 3x15<br>• Push-ups: 3x to failure</td>
                            <td align="left" data-details-file="strength_p1_group2_day2.md"><strong>Core & Stability:</strong><br>• Bird-Dog: 3x10 each side<br>• Dead Bug: 3x10 each side<br>• Side Planks: 3x30s each side</td>
                        </tr>
                        <tr>
                            <td align="left"><strong>Throws</strong></td>
                            <td align="left" data-details-file="strength_p1_group3_day1.md"><strong>Lower Body Power:</strong><br>• Box Squats: 4x5-6<br>• Kettlebell Swings: 4x10<br>• Sled Pushes (heavy): 3x20m</td>
                            <td align="left" data-details-file="strength_p1_group3_day2.md"><strong>Upper Body Strength:</strong><br>• Overhead Press: 4x5-6<br>• Bent-Over Rows: 4x6-8<br>• Rotational Med Ball Throws: 3x8 each side</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Phase 2: Explosive Power (Weeks 4-6)</h3>
            <p><em>Focus on converting the strength gains from Phase 1 into explosive power. The movements become faster and more dynamic.</em></p>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th align="left">Group</th>
                            <th align="left">Day 1 Focus</th>
                            <th align="left">Day 2 Focus</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td align="left"><strong>Short Sprints, Jumps & Sprints, Long Sprints</strong></td>
                            <td align="left" data-details-file="strength_p2_group1_day1.md"><strong>Lower Body Power:</strong><br>• Box Jumps: 4x5<br>• Kettlebell Swings: 4x10<br>• Bounding: 3x30m</td>
                            <td align="left" data-details-file="strength_p2_group1_day2.md"><strong>Upper Body & Plyometrics:</strong><br>• Plyometric Push-ups: 3x5-8<br>• Medicine Ball Slams: 3x8<br>• Tuck Jumps: 3x8</td>
                        </tr>
                        <tr>
                            <td align="left"><strong>Middle Distance, Long Distance</strong></td>
                            <td align="left" data-details-file="strength_p2_group2_day1.md"><strong>Full Body Power:</strong><br>• Jump Squats: 3x10<br>• Single Leg Hops: 3x10 each leg<br>• Medicine Ball Slams: 3x10</td>
                            <td align="left" data-details-file="strength_p2_group2_day2.md"><strong>Running Economy:</strong><br>• A-Skips for height: 3x20m<br>• Straight Leg Bounds: 3x20m<br>• Hill Sprints: 4-6x 10-15s</td>
                        </tr>
                        <tr>
                            <td align="left"><strong>Throws</strong></td>
                            <td align="left" data-details-file="strength_p2_group3_day1.md"><strong>Full Body Explosiveness:</strong><br>• Power Cleans (or Hang Cleans): 5x3<br>• Depth Jumps (low box): 3x5<br>• Heavy Med Ball Throws: 3x5</td>
                            <td align="left" data-details-file="strength_p2_group3_day2.md"><strong>Rotational Power:</strong><br>• Landmine Press & Twist: 3x8 each side<br>• Cable Woodchops: 3x10 each side<br>• Sled Drags (lateral): 3x20m</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Phase 3: Sport-Specific Power (Weeks 7-9)</h3>
            <p><em>Focus on movements that closely mimic the demands of the specific event. The goal is to maximize the transfer of power to performance.</em></p>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th align="left">Group</th>
                            <th align="left">Day 1 Focus</th>
                            <th align="left">Day 2 Focus</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td align="left"><strong>Short Sprints, Jumps & Sprints, Long Sprints</strong></td>
                            <td align="left" data-details-file="strength_p3_group1_day1.md"><strong>Reactive Strength:</strong><br>• Depth Jumps: 4x5<br>• Resisted Sprints (Sled): 4x20m<br>• Hurdle Hops: 3x5 hurdles</td>
                            <td align="left" data-details-file="strength_p3_group1_day2.md"><strong>Event-Specific Power:</strong><br>• <strong>LJ/TJ:</strong> Short Approach Jumps<br>• <strong>Sprints:</strong> Block Starts with resistance<br>• Assisted Sprints (Bands): 3x20m</td>
                        </tr>
                        <tr>
                            <td align="left"><strong>Middle Distance, Long Distance</strong></td>
                            <td align="left" data-details-file="strength_p3_group2_day1.md"><strong>Race-Specific Strength:</strong><br>• Hill Repeats (longer): 3-4x 45-60s<br>• Strides with exaggerated arm drive: 4x100m</td>
                            <td align="left" data-details-file="strength_p3_group2_day2.md"><strong>Final Sharpening:</strong><br>• Light Plyometrics (Pogo Hops)<br>• Core work<br>• Mobility and stretching</td>
                        </tr>
                        <tr>
                            <td align="left"><strong>Throws</strong></td>
                            <td align="left" data-details-file="strength_p3_group3_day1.md"><strong>Event-Specific Throws:</strong><br>• Full Throws (with implement)<br>• Heavy to Light Implement Throws<br>• Standing Throws for power</td>
                            <td align="left" data-details-file="strength_p3_group3_day2.md"><strong>CNS Priming:</strong><br>• Explosive Med Ball Throws<br>• Box Jumps<br>• Short Sprints (10-20m)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <hr>

            <h2>Advanced Sprint Training Techniques</h2>
            <p>This section provides a variety of sprint training workouts designed to improve acceleration, maximal velocity, and speed endurance. These workouts should be incorporated into the training plan based on the specific phase and goals.</p>

            <h3>Acceleration Workouts</h3>
            <p><em>Focus on developing explosive starting strength and the ability to reach top speed quickly.</em></p>
            <ul>
                <li><strong>Hill Sprints:</strong> 4-6 x 30-50m sprints up a moderate incline. Full recovery walk down.</li>
                <li><strong>Resisted Sprints (Sled or Bands):</strong> 5-6 x 20-30m sprints with light to moderate resistance.</li>
                <li><strong>Block Starts:</strong> 6-8 x 10-30m sprints from starting blocks, focusing on technique and power.</li>
            </ul>

            <h3>Maximal Velocity Workouts</h3>
            <p><em>Focus on improving top speed and the ability to maintain it.</em></p>
            <ul>
                <li><strong>Flying Sprints:</strong> 4-5 x 30-50m sprints with a 20-30m build-up. Focus on relaxed, efficient sprinting at top speed.</li>
                <li><strong>Ins and Outs:</strong> 3-4 x 60-80m sprints, alternating between 20m at 95% and 20m at 85% effort.</li>
                <li><strong>Overspeed Training (Downhill or with assistance):</strong> 3-4 x 30-40m sprints on a slight decline or with light assistance to promote faster leg turnover.</li>
            </ul>

            <h3>Speed Endurance Workouts</h3>
            <p><em>Focus on the ability to maintain a high percentage of top speed for an extended duration.</em></p>
            <ul>
                <li><strong>Intensive Tempo:</strong> 6-8 x 150-200m at 80-85% effort with 2-3 minutes recovery.</li>
                <li><strong>Lactate Tolerance:</strong> 2-3 sets of 3 x 100m at 90-95% effort with 30 seconds rest between reps and 8-10 minutes between sets.</li>
                <li><strong>Race Simulation:</strong> 1-2 x 150-300m at race pace or slightly faster, with full recovery.</li>
            </ul>

            <hr>

            <h3>Enhanced Youth Training Plan: A Physiologically-Based Approach</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th align="left">Phase / Athlete Group</th>
                            <th align="left">Workout Category</th>
                            <th align="left">Enhanced Exercises & Protocol</th>
                            <th align="left">Rationale / Key Cues (from Documents)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td align="left" id="phase1-gpp"><strong>P1: GPP</strong> (Wk 1-3)</td>
                            <td align="left"><strong>Short Sprints (60m-200m)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p1_short_sprints_rationale.md"><strong>Focus:</strong> Build acceleration mechanics, general strength, and aerobic base on grass/soft surfaces.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Acceleration Foundation</strong></td>
                            <td align="left" data-details-file="p1_short_sprints_accel.md">• 2x/week: Short Sprints (4-6 x 10-30m) from standing starts.<br>• 1x/week: Resisted Sprints (4-6 x 10-20m with light sled/bands).</td>
                            <td align="left" data-details-file="p1_short_sprints_accel_rationale.md">Develops the foundation of speed. Resisted sprints improve horizontal force production and teach aggressive pushing mechanics.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>General Endurance/Tempo</strong></td>
                            <td align="left" data-details-file="p1_short_sprints_endurance.md">• 1x/week: Extensive Tempo Runs (e.g., 8-10 x 100m @ 65-75% effort with walk-back rest).</td>
                            <td align="left" data-details-file="p1_short_sprints_endurance_rationale.md">Builds aerobic fitness, which aids recovery between high-intensity efforts. Also develops ankle stiffness and running skill at low intensity.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Strength & Plyometrics</strong></td>
                            <td align="left" data-details-file="p1_short_sprints_strength.md">• 2x/week: Full Body Strength Circuit (Bodyweight/Light DBs): Squats, Lunges, Push-ups, Rows.<br>• <strong>Plyo:</strong> Rudiment Hops, Pogo Hops, Standing Long Jumps.</td>
                            <align="left" data-details-file="p1_short_sprints_strength_rationale.md">General strength builds tissue resilience. <strong>Rudiment Hops</strong> are the safest foundational plyometric for ankle strength. <strong>Standing Long Jumps</strong> develop horizontal power.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Jumps & Sprints (LJ, TJ, HJ)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p1_jumps_sprints_rationale.md"><strong>Focus:</strong> Develop explosive power, coordination, and foundational sprint speed.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Accel/Power Foundation</strong></td>
                            <td align="left" data-details-file="p1_jumps_sprints_accel.md">• 1x/week: Short Sprints (4-6 x 20-30m).<br>• 1x/week: <strong>Bounding Series:</strong> Alternate Leg Bounds, Single Leg Bounds (short distance).</td>
                            <td align="left" data-details-file="p1_jumps_sprints_accel_rationale.md">Sprinting is the foundation of all jumps. Bounding is a specific plyometric that directly translates to jumping power and elasticity.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>General Endurance/Tempo</strong></td>
                            <td align="left" data-details-file="p1_jumps_sprints_endurance.md">• 1x/week: Extensive Tempo Runs (e.g., 6-8 x 100m @ 70% effort).</td>
                            <td align="left" data-details-file="p1_jumps_sprints_endurance_rationale.md">Maintains aerobic fitness and work capacity without the high impact of maximal sprinting/jumping.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Strength & Plyometrics</strong></td>
                            <td align="left" data-details-file="p1_jumps_sprints_strength.md">• 2x/week: <strong>Unilateral Strength:</strong> Split Squats, Single Leg RDLs, Step-ups.<br>• <strong>Plyo:</strong> Box Jumps (low box), Standing Triple Jumps.</td>
                            <td align="left" data-details-file="p1_jumps_sprints_strength_rationale.md">Unilateral (single-leg) strength is critical for jumping. The <strong>Standing Triple Jump</strong> is an invaluable tool for teaching rhythm and assessing single-leg power.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Long Sprints (400m)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p1_long_sprints_rationale.md"><strong>Focus:</strong> Build a strong aerobic base and general strength to handle future high-lactate workouts.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>General Endurance/Tempo</strong></td>
                            <td align="left" data-details-file="p1_long_sprints_endurance.md">• 1-2x/week: Extensive Tempo Runs (e.g., 8-12 x 200m @ 70-75% effort with 2-3 min rest).</td>
                            <td align="left" data-details-file="p1_long_sprints_endurance_rationale.md">A larger volume of tempo work is needed to build the endurance base required for the 400m.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Speed Development</strong></td>
                            <td align="left" data-details-file="p1_long_sprints_speed.md">• 1x/week: <strong>Short Hill Sprints</strong> (6-8 x 10-15 seconds) with full walk-down recovery.</td>
                            <td align="left" data-details-file="p1_long_sprints_speed_rationale.md">Hills are a safe and effective way to build the leg strength and power needed for a fast 400m without the high impact of track work.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>General Strength & Core</strong></td>
                            <td align="left" data-details-file="p1_long_sprints_strength.md">• 2x/week: Full Body Strength Circuit, emphasizing core stability (Planks, Side Planks, Leg Raises).</td>
                            <td align="left" data-details-file="p1_long_sprints_strength_rationale.md">A strong core is vital for maintaining posture and efficient mechanics during the final, fatiguing stages of the 400m.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Middle Distance (800m/1500m)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p1_middle_distance_rationale.md"><strong>Focus:</strong> Establish a strong aerobic foundation through consistent running volume.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Aerobic Base</strong></td>
                            <td align="left" data-details-file="p1_middle_distance_aerobic.md">• <strong>3-4x per week:</strong> 20-35 min easy runs on varied surfaces (grass/trails).<br>• <strong>1x per week:</strong> Long Run (40-50 min).</td>
                            <td align="left" data-details-file="p1_middle_distance_aerobic_rationale.md">Volume is key in GPP for this group. Varied surfaces build resilience. The long run is the most important workout of the week.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Speed & Running Economy</strong></td>
                            <td align="left" data-details-file="p1_middle_distance_speed.md">• <strong>1x per week:</strong> Short Hill Sprints (8-10 x 10-15 sec) with full recovery.<br>• <strong>2x per week:</strong> Add 4-6 x 100m Strides after easy runs.</td>
                            <td align="left" data-details-file="p1_middle_distance_speed_rationale.md">Hill sprints build power and improve form. Strides maintain neuromuscular connection to faster running and improve efficiency.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Strength & Injury Prevention</strong></td>
                            <td align="left" data-details-file="p1_middle_distance_strength.md">• <strong>2x per week:</strong> Bodyweight Circuit with a focus on unilateral exercises (Lunges, Step-ups) and core stability.</td>
                            <td align="left" data-details-file="p1_middle_distance_strength_rationale.md">Unilateral strength helps prevent imbalances that can arise from high running volume.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Long Distance (3k/5k)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p1_long_distance_rationale.md"><strong>Focus:</strong> Maximize aerobic volume and build strength endurance.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Aerobic Base</strong></td>
                            <td align="left" data-details-file="p1_long_distance_aerobic.md">• <strong>4-5x per week:</strong> 30-45 min easy runs.<br>• <strong>1x per week:</strong> Long Run (60-75 min).</td>
                            <td align="left" data-details-file="p1_long_distance_aerobic_rationale.md">The foundation of 5k training is a deep aerobic engine built through consistent volume.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Strength Endurance & Hills</strong></td>
                            <td align="left" data-details-file="p1_long_distance_strength.md">• <strong>1x per week:</strong> Run a hilly route for 30-40 min, focusing on consistent effort.</td>
                            <td align="left" data-details-file="p1_long_distance_strength_rationale.md">Hilly runs are a form of strength endurance training, building the specific muscular resilience needed for distance racing.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Running Economy</strong></td>
                            <td align="left" data-details-file="p1_long_distance_economy.md">• <strong>2x per week:</strong> Add 6-8 x 100m Strides after easy runs.</td>
                            <td align="left" data-details-file="p1_long_distance_economy_rationale.md">Improves running mechanics and efficiency, which is crucial for conserving energy over long distances.</td>
                        </tr>
                        <tr>
                            <td align="left" id="phase2-spp"><strong>P2: SPP</strong> (Wk 4-6)</td>
                            <td align="left"><strong>Short Sprints (60m-200m)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p2_short_sprints_rationale.md"><strong>Focus:</strong> Maximize acceleration and top speed. Transition to track surfaces.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Acceleration & Max Velocity</strong></td>
                            <td align="left" data-details-file="p2_short_sprints_accel.md">• 1x/week: <strong>Acceleration:</strong> 4-6 x 30-40m from blocks.<br>• 1x/week: <strong>Max Velocity:</strong> 3-5 x 20-30m Flying Sprints with full recovery.</td>
                            <td align="left" data-details-file="p2_short_sprints_accel_rationale.md">This separates the two key components of a short sprint. Flying Sprints are the primary method for developing top speed.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Speed Endurance</strong></td>
                            <td align="left" data-details-file="p2_short_sprints_endurance.md">• <strong>Micro-dose:</strong> Add 1-2 x 70-90m @ 95% effort after an acceleration day.</td>
                            <td align="left" data-details-file="p2_short_sprints_endurance_rationale.md">Safely introduces the stimulus of running fast under fatigue, preparing the body for the demands of the 100m and 200m.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Strength & Power</strong></td>
                            <td align="left" data-details-file="p2_short_sprints_strength.md">• 2x/week: <strong>Heavy Lifts:</strong> Squats, Deadlifts (3-5 sets of 3-5 reps).<br>• <strong>Explosive Lifts:</strong> Jump Squats, Med Ball Throws.</td>
                            <td align="left" data-details-file="p2_short_sprints_strength_rationale.md">Progress to heavier loads to increase maximal force production. Explosive lifts translate that strength into speed.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Jumps & Sprints (LJ, TJ, HJ)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p2_jumps_sprints_rationale.md"><strong>Focus:</strong> Convert strength to explosive power and refine event-specific technique at speed.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Max Velocity & Approach</strong></td>
                            <td align="left" data-details-file="p2_jumps_sprints_max_velocity.md">• 1x/week: Flying Sprints (3-5 x 30m) to develop approach speed.<br>• 1x/week: <strong>Short Approach Jumps</strong> (3-5 step approach).</td>
                            <td align="left" data-details-file="p2_jumps_sprints_max_velocity_rationale.md">Approach speed is the biggest determinant of jump distance. Short approaches allow for technical refinement at high speed.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Event-Specific Plyos</strong></td>
                            <td align="left" data-details-file="p2_jumps_sprints_plyos.md">• <strong>Depth Jumps (from low box, 6-12 inches)</strong><br>• <strong>Bounding for distance/height.</strong></td>
                            <td align="left" data-details-file="p2_jumps_sprints_plyos_rationale.md">Depth jumps are an intense plyometric for developing reactive strength. Bounding improves horizontal and vertical power.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Event-Specific Strength</strong></td>
                            <td align="left" data-details-file="p2_jumps_sprints_strength.md">• 2x/week: <strong>Olympic Lifts</strong> (Power Cleans) and <strong>Unilateral Lifts</strong> (Bulgarian Split Squats).</td>
                            <td align="left" data-details-file="p2_jumps_sprints_strength_rationale.md">Olympic lifts develop total-body explosive power. Unilateral lifts build the specific strength needed for single-leg takeoffs.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Long Sprints (400m)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p2_long_sprints_rationale.md"><strong>Focus:</strong> Develop lactate tolerance and the ability to hold speed under extreme fatigue.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Speed Endurance</strong></td>
                            <td align="left" data-details-file="p2_long_sprints_endurance.md">• 1x/week: <strong>Special Endurance 1:</strong> 2-3 x 200-300m @ 90-95% effort with 15-20 min rest.</td>
                            <td align="left" data-details-file="p2_long_sprints_endurance_rationale.md">The primary workout for a 400m runner. Teaches the body to perform under high levels of metabolic stress.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Max Velocity Maintenance</strong></td>
                            <td align="left" data-details-file="p2_long_sprints_max_velocity.md">• 1x/week: <strong>Short Speed Endurance:</strong> 3-4 x 150m @ 95%+ effort with 10-15 min rest.</td>
                            <td align="left" data-details-file="p2_long_sprints_max_velocity_rationale.md">Maintains the raw speed component. A 400m runner must be fast to be great.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Strength & Power</strong></td>
                            <td align="left" data-details-file="p2_long_sprints_strength.md">• 2x/week: Strength training with a focus on <strong>Strength Endurance</strong> (e.g., higher reps on accessory lifts, circuits with weights).</td>
                            <td align="left" data-details-file="p2_long_sprints_strength_rationale.md">Builds the muscular endurance needed to maintain powerful strides for the full 400m.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Middle Distance (800m/1500m)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p2_middle_distance_rationale.md"><strong>Focus:</strong> Sharpening race-specific fitness with a blend of aerobic and anaerobic work.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Lactate Threshold</strong></td>
                            <td align="left" data-details-file="p2_middle_distance_lactate.md">• 1x/week: <strong>Tempo/Cruise Intervals:</strong> 3-5 x 1000m @ tempo pace with 60-90 sec jog rest.</td>
                            <td align="left" data-details-file="p2_middle_distance_lactate_rationale.md">The "secret" workout. This is the single best session for improving the ability to sustain a fast pace in the mile and 800m.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>VO2 Max / Race Pace</strong></td>
                            <td align="left" data-details-file="p2_middle_distance_vo2max.md">• 1x/week: <strong>Intervals:</strong> 6-8 x 400m @ 1500m race pace OR 4-5 x 600m @ 800m race pace.</td>
                            <td align="left" data-details-file="p2_middle_distance_vo2max_rationale.md">Pushes the aerobic ceiling and provides specific practice at race intensity.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Speed Maintenance</strong></td>
                            <td align="left" data-details-file="p2_middle_distance_speed.md">• <strong>2x per week:</strong> Add 4-6 x 200m cut-downs (getting faster each rep) after easy runs.</td>
                            <td align="left" data-details-file="p2_middle_distance_speed_rationale.md">Maintains the speed reserve needed for a strong finishing kick.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Long Distance (3k/5k)</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p2_long_distance_rationale.md"><strong>Focus:</strong> Maximizing aerobic power and lactate threshold.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Lactate Threshold</strong></td>
                            <td align="left" data-details-file="p2_long_distance_lactate.md">• 1x/week: <strong>Continuous Tempo Run (20-25 min)</strong> OR Long Intervals (e.g., 3-4 x Mile @ tempo pace).</td>
                            <td align="left" data-details-file="p2_long_distance_lactate_rationale.md">The most important workout for this group. Directly improves the fastest pace they can hold aerobically.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>VO2 Max / Aerobic Power</strong></td>
                            <td align="left" data-details-file="p2_long_distance_vo2max.md">• 1x/week: <strong>Intervals:</strong> 4-6 x 800m or 3-5 x 1000m @ 3k-5k race pace with 2-3 min jog recovery.</td>
                            <td align="left" data-details-file="p2_long_distance_vo2max_rationale.md">Improves the body's maximum ability to utilize oxygen, the ultimate limiter in distance events.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Long Run with Quality</strong></td>
                            <td align="left" data-details-file="p2_long_distance_long_run.md">• 1x/week: Long run (75-90 min) with a "fast finish" for the last 10-15 minutes.</td>
                            <td align="left" data-details-file="p2_long_distance_long_run_rationale.md">Simulates racing on tired legs, building physical and mental resilience for the latter stages of a 5k.</td>
                        </tr>
                        <tr>
                            <td align="left" id="phase3-comp"><strong>P3: Competition</strong> (Wk 7-9)</td>
                            <td align="left"><strong>All Groups</strong></td>
                            <td align="left"></td>
                            <td align="left" data-details-file="p3_all_groups_rationale.md"><strong>Focus:</strong> Tapering volume, maintaining intensity, and achieving peak performance ("Supercompensation").</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Race Simulation/Tune-Up</strong></td>
                            <td align="left" data-details-file="p3_all_groups_race_sim.md">• <strong>Short/Long Sprints:</strong> 2-3 x 30-50m @ 98% from blocks.<br>• <strong>Jumps:</strong> 2-3 full approach jumps.<br>• <strong>Mid-D:</strong> 2 x 400m @ goal race pace.<br>• <strong>Long-D:</strong> 2-3 x 800m @ goal race pace.</td>
                            <td align="left" data-details-file="p3_all_groups_race_sim_rationale.md">Very low volume of race-specific work to sharpen the body and mind without causing fatigue.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>CNS Priming/Shakeout</strong></td>
                            <td align="left" data-details-file="p3_all_groups_cns_priming.md">• <strong>1-2 days before meet:</strong> Abbreviated warm-up, 2-3 very short, explosive efforts (e.g., 20m sprints, a few takeoffs), 2-4 strides.</td>
                            <td align="left" data-details-file="p3_all_groups_cns_priming_rationale.md">Wakes up the nervous system to be ready for maximal effort. The goal is to feel "bouncy" and fast.</td>
                        </tr>
                        <tr>
                            <td align="left"></td>
                            <td align="left"><strong>Recovery & Mental Prep</strong></td>
                            <td align="left" data-details-file="p3_all_groups_recovery.md">• <strong>Full rest days.</strong><br>• <strong>Focused Visualization</strong> of the race plan, from warm-up to a successful finish.</td>
                            <td align="left" data-details-file="p3_all_groups_recovery_rationale.md">Recovery allows for supercompensation. Visualization builds confidence and reduces race-day anxiety.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <hr>

        <div class="cooldown-section">
            <h2>Recovery & Regeneration</h2>
            <p><em>Recovery is as important as the training itself. This section provides guidelines for proper recovery to ensure athletes can adapt to training and prevent injuries.</em></p>

            <h3>Post-Workout Cool-Down (10-15 mins)</h3>
            <ul>
                <li><strong>Light Jogging:</strong> 2-3 laps at a very easy pace to flush out metabolic waste.</li>
                <li><strong>Static Stretching:</strong> Hold each stretch for 20-30 seconds. Focus on major muscle groups: hamstrings, quads, glutes, calves, hip flexors, chest, and shoulders.</li>
                <li><strong>Foam Rolling:</strong> Spend 5-10 minutes on tight areas to release muscle tension.</li>
            </ul>

            <h3>Nutrition & Hydration</h3>
            <ul>
                <li><strong>Post-Workout Nutrition:</strong> Consume a snack or meal with a 3:1 or 4:1 ratio of carbohydrates to protein within 30-60 minutes after training to replenish glycogen stores and repair muscle tissue.</li>
                <li><strong>Hydration:</strong> Drink water throughout the day. Monitor urine color to ensure adequate hydration (should be light yellow).</li>
            </ul>

            <h3>Sleep</h3>
            <ul>
                <li><strong>Aim for 8-10 hours of quality sleep per night.</strong> Sleep is when the body repairs itself and consolidates learning.</li>
            </ul>

            <hr>

            <h2>Mental Preparation</h2>
            <p><em>Mental skills are crucial for success in athletics. This section provides strategies to help athletes develop mental toughness and prepare for competition.</em></p>

            <h3>Visualization</h3>
            <ul>
                <li><strong>Practice visualization for 5-10 minutes daily.</strong> Imagine yourself executing skills perfectly and achieving your goals. This can be done before bed, before practice, or during quiet moments.</li>
            </ul>

            <h3>Goal Setting</h3>
            <ul>
                <li><strong>Set SMART goals (Specific, Measurable, Achievable, Relevant, Time-bound).</strong> This provides direction and motivation for training.</li>
                <li><strong>Focus on process goals (e.g., "execute a perfect block start") rather than just outcome goals (e.g., "win the race").</strong></li>
            </ul>

            <h3>Pre-Competition Routine</h3>
            <ul>
                <li><strong>Develop a consistent pre-competition routine.</strong> This can help reduce anxiety and get you in the right mindset to perform. The routine can include a specific warm-up, visualization, and positive self-talk.</li>
            </ul>
        </div>
    </div>

    <!-- The Modal -->
    <div id="details-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <div id="modal-body-content"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const totalWeeksInput = document.getElementById('total-weeks');
            const generatePlanBtn = document.getElementById('generate-plan-btn');
            const phase1Cell = document.getElementById('phase1-gpp');
            const phase2Cell = document.getElementById('phase2-spp');
            const phase3Cell = document.getElementById('phase3-comp');

            const calculateAndDisplayPlan = () => {
                const totalWeeks = parseInt(totalWeeksInput.value, 10);
                if (isNaN(totalWeeks) || totalWeeks < 7) {
                    alert("Please enter a number of 7 or greater for the total weeks.");
                    return;
                }

                // New logic based on periodization principles
                const p3_duration = Math.min(2, Math.round(totalWeeks * 0.25)); // Cap competition phase at 2 weeks or 25% for shorter plans
                const preparatoryPeriod = totalWeeks - p3_duration;
                const p1_duration = Math.round(preparatoryPeriod * 0.4);
                const p2_duration = preparatoryPeriod - p1_duration;

                const p1_end = p1_duration;
                const p2_start = p1_end + 1;
                const p2_end = p2_start + p2_duration - 1;
                const p3_start = p2_end + 1;
                const p3_end = totalWeeks;

                phase1Cell.innerHTML = `<strong>P1: GPP</strong> (Wk 1-${p1_end})`;
                phase2Cell.innerHTML = `<strong>P2: SPP</strong> (Wk ${p2_start}-${p2_end})`;
                phase3Cell.innerHTML = `<strong>P3: Competition</strong> (Wk ${p3_start}-${p3_end})`;
            };

            generatePlanBtn.addEventListener('click', calculateAndDisplayPlan);
            // Initial calculation on page load
            calculateAndDisplayPlan();

            const modal = document.getElementById('details-modal');
            const modalBody = document.getElementById('modal-body-content');
            const closeButton = document.querySelector('.close-button');
            const tableContainer = document.querySelector('.table-container');

            // Function to open the modal and fetch content
            const openModal = (cell) => {
                const fileName = cell.getAttribute('data-details-file');
                if (!fileName) return;

                const filePath = `details-v2/${fileName}`;

                fetch(filePath)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.text();
                    })
                    .then(markdown => {
                        modalBody.innerHTML = marked.parse(markdown);
                        modal.style.display = 'block';
                    })
                    .catch(error => {
                        console.error('Error fetching details:', error);
                        modalBody.innerHTML = `<p>Could not load details. Please ensure the file <code>${filePath}</code> exists.</p>`;
                        modal.style.display = 'block';
                    });
            };

            // Function to close the modal
            const closeModal = () => {
                modal.style.display = 'none';
                modalBody.innerHTML = ''; // Clear content
            };

            // Event listener for table clicks
            if (tableContainer) {
                tableContainer.addEventListener('click', function (event) {
                    const targetCell = event.target.closest('td');
                    if (targetCell && targetCell.hasAttribute('data-details-file')) {
                        openModal(targetCell);
                    }
                });
            }

            // Event listener for the close button
            if (closeButton) {
                closeButton.addEventListener('click', closeModal);
            }

            // Event listener to close modal when clicking outside of it
            window.addEventListener('click', function (event) {
                if (event.target === modal) {
                    closeModal();
                }
            });
        });
    </script>
    <div style="text-align: center; margin-top: 2em;">
        <a href="index.html">Switch to Established Plan (v1)</a>
    </div>
</body>
</html>
